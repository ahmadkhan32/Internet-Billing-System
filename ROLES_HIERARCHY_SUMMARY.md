# ğŸ‘¥ Roles & Responsibilities - Quick Reference

## Role Hierarchy (Top to Bottom)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPER ADMIN (Level 1)                     â”‚
â”‚  ğŸ‘‘ Platform Owner - Full System Access                      â”‚
â”‚  â€¢ Manages all ISPs                                         â”‚
â”‚  â€¢ Creates users with any role                              â”‚
â”‚  â€¢ System-wide settings                                     â”‚
â”‚  â€¢ No data restrictions                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Creates & Manages
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         ISP 1, ISP 2, ISP N...        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Has
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ADMIN / ISP OWNER (Level 2)                     â”‚
â”‚  ğŸ¢ Business Owner - Full ISP Management                     â”‚
â”‚  â€¢ Manages their ISP's data                                 â”‚
â”‚  â€¢ Creates staff & customer users                           â”‚
â”‚  â€¢ Full access to ISP operations                            â”‚
â”‚  â€¢ Restricted to own ISP only                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Manages
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            STAFF ROLES (Level 3)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ACCOUNT    â”‚  â”‚  TECHNICAL   â”‚  â”‚   RECOVERY   â”‚
â”‚   MANAGER    â”‚  â”‚   OFFICER    â”‚  â”‚   OFFICER    â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ ğŸ’° Billing   â”‚  â”‚ ğŸ”§ Install   â”‚  â”‚ ğŸ’µ Collect   â”‚
â”‚ & Accounts   â”‚  â”‚ & Technical  â”‚  â”‚ & Recovery   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Serves
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CUSTOMER (Level 4)                        â”‚
â”‚  ğŸ‘¤ End User - Self-Service Portal                          â”‚
â”‚  â€¢ Views own bills & payments                               â”‚
â”‚  â€¢ Makes online payments                                    â”‚
â”‚  â€¢ Downloads invoices                                       â”‚
â”‚  â€¢ Own data only                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Permission Matrix (Simplified)

| Feature | Super Admin | Admin | Account Manager | Technical Officer | Recovery Officer | Customer |
|---------|:-----------:|:-----:|:---------------:|:-----------------:|:----------------:|:--------:|
| **Users** |
| View All Users | âœ… | âœ… (Own ISP) | âŒ | âŒ | âŒ | âŒ |
| Create Users | âœ… (Any) | âœ… (Staff/Customer) | âŒ | âŒ | âŒ | âŒ |
| **ISPs** |
| View ISPs | âœ… (All) | âŒ | âŒ | âŒ | âŒ | âŒ |
| Create ISPs | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |
| **Customers** |
| View Customers | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ |
| Create Customers | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âŒ |
| **Packages** |
| View Packages | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âŒ |
| Create Packages | âœ… (All) | âœ… (Own ISP) | âŒ | âŒ | âŒ | âŒ |
| **Bills** |
| View Bills | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âœ… (Own) |
| Create Bills | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âŒ |
| Generate Bills | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âŒ |
| **Payments** |
| View Payments | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âœ… (Own ISP) | âœ… (Own) |
| Create Payments | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âœ… (Own ISP) | âœ… (Own) |
| **Recoveries** |
| View Recoveries | âœ… (All) | âœ… (Own ISP) | âŒ | âŒ | âœ… (Own ISP) | âŒ |
| Create Recoveries | âœ… (All) | âœ… (Own ISP) | âŒ | âŒ | âŒ | âŒ |
| **Installations** |
| View Installations | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ |
| Create Installations | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ |
| **Reports** |
| View Reports | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âŒ |
| Generate Reports | âœ… (All) | âœ… (Own ISP) | âœ… (Own ISP) | âŒ | âŒ | âŒ |
| **Roles & Permissions** |
| Manage Roles | âœ… | âœ… (Own ISP) | âŒ | âŒ | âŒ | âŒ |
| Manage Permissions | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |
| **SaaS Packages** |
| Manage SaaS Packages | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |

---

## ğŸ” Access Control Rules

### 1. **Super Admin**
- âœ… **No Restrictions**: Can access all data across all ISPs
- âœ… **Bypasses Filters**: Tenant middleware skips filtering
- âœ… **Full Control**: Can create any role, manage any ISP

### 2. **Admin (ISP Owner)**
- âš ï¸ **ISP Restricted**: Can only access data from their assigned ISP
- âœ… **Full ISP Control**: Manages all aspects of their ISP
- âœ… **Staff Management**: Can create and manage staff roles
- âŒ **No Cross-ISP Access**: Cannot see other ISPs' data

### 3. **Staff Roles** (Account Manager, Technical Officer, Recovery Officer)
- âš ï¸ **ISP Restricted**: Can only access data from their assigned ISP
- âœ… **Specialized Access**: Limited to their domain of responsibility
- âŒ **No User Management**: Cannot create or manage users
- âŒ **No ISP Management**: Cannot manage ISP settings

### 4. **Customer**
- âš ï¸ **Self-Only**: Can only access their own data
- âœ… **Portal Access**: Dedicated customer portal interface
- âœ… **Self-Service**: View bills, make payments, download invoices
- âŒ **No Admin Access**: Cannot access admin interface

---

## ğŸ¯ Key Responsibilities by Role

### Super Admin ğŸ‘‘
- Platform administration
- ISP onboarding and management
- SaaS package management
- System-wide configuration
- User management (all roles)
- Global analytics and reports

### Admin (ISP Owner) ğŸ¢
- ISP business management
- Staff hiring and management
- Customer onboarding
- Package creation and pricing
- Business analytics
- ISP settings configuration

### Account Manager ğŸ’°
- Customer account management
- Bill generation and management
- Payment processing and verification
- Invoice generation
- Revenue reporting
- Customer communication

### Technical Officer ğŸ”§
- New connection installations
- Service activation/deactivation
- Connection troubleshooting
- Bandwidth management
- Installation scheduling
- Technical support

### Recovery Officer ğŸ’µ
- Overdue bill collection
- Field payment collection
- Recovery record updates
- Customer follow-ups
- Payment verification
- Collection reporting

### Customer ğŸ‘¤
- View billing history
- Make online payments
- Download invoices and receipts
- View service status
- Update personal information
- Contact support

---

## ğŸ”„ Data Flow Example

```
Super Admin Request:
  User â†’ Auth â†’ Role Check â†’ Tenant (Skip Filter) â†’ Permission â†’ Database (All Data)
  
Admin Request:
  User â†’ Auth â†’ Role Check â†’ Tenant (Filter by isp_id) â†’ Permission â†’ Database (ISP Data Only)
  
Customer Request:
  User â†’ Auth â†’ Role Check â†’ Tenant (Filter by user_id) â†’ Permission â†’ Database (Own Data Only)
```

---

## ğŸ“ Quick Reference

| Role | Code | ISP Assignment | Can Create Users | Data Scope |
|------|------|----------------|------------------|------------|
| Super Admin | `super_admin` | âŒ No (`isp_id = NULL`) | âœ… All roles | All ISPs |
| Admin | `admin` | âœ… Yes | âœ… Staff & Customer | Own ISP |
| Account Manager | `account_manager` | âœ… Yes | âŒ No | Own ISP |
| Technical Officer | `technical_officer` | âœ… Yes | âŒ No | Own ISP |
| Recovery Officer | `recovery_officer` | âœ… Yes | âŒ No | Own ISP |
| Customer | `customer` | âœ… Yes | âŒ No | Own Data |

---

**For detailed ERD diagrams, see `ROLES_ERD_DIAGRAM.md`**

